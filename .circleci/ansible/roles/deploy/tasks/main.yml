- name: "copy backend files"
  become: true 
  copy:
    src: /root/project/backend.tar.gz
    dest: /home/ubuntu/
    owner: ubuntu
    group: ubuntu

- name: "Uncompress Backend"
  become: true
  shell: |
    tar -xvf /home/ubuntu/backend.tar.gz --strip=2
    rm -f /home/ubuntu/backend.tar.gz
   
- name: "Install dependencies"
  become: true
  shell: |
    apt update
    apt-get install nodejs npm -y 
    node --version

- name: "Install and run Server"
  become: true
  shell: |
    cd /home/ubuntu/backend
    npm install


# - name: "Run server"
#   shell: |
#     cd ~/backeend
#     npm install
#     npm run start